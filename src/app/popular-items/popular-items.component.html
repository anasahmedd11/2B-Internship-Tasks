<div class="container popular-items">
  <div class="section-header">
    <h2 class="section-title">Popular Items</h2>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-container">
    <div class="spinner"></div>
    <p>Loading products...</p>
  </div>

  <!-- Products Grid -->
  <div *ngIf="!loading" class="row g-4">
    <div class="col-lg-3 col-md-6" *ngFor="let product of products">
      <div class="product-card">
        <div class="product-image">
          <img [src]="product.image" [alt]="product.title">
          <div class="hover-overlay">
            <div class="overlay-actions">
              <button class="overlay-btn view-btn">
                <i class="far fa-eye"></i>
              </button>
              <button class="overlay-btn favorite-btn">
                <i class="far fa-heart"></i>
              </button>
            </div>
          </div>
        </div>
        
        <div class="product-info">
          <h4 class="product-title">{{ truncateTitle(product.title) }}</h4>
          
          <div class="product-rating">
            <div class="stars">
              <i *ngFor="let filled of getStarArray(product.rating.rate)" 
                 [class]="filled ? 'fas fa-star filled' : 'far fa-star'">
              </i>
            </div>
          </div>

          <div class="product-price">
            <span class="current-price">${{ product.price }}</span>
            <span class="original-price">${{ (product.price * 1.3) | number:'1.2-2' }}</span>
          </div>

          <button class="add-to-cart-btn">
            <i class="fas fa-shopping-bag"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
